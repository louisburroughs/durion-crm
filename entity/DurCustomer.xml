<?xml version="1.0" encoding="UTF-8"?>
<entities xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/entity-definition-3.xsd">

    <entity entity-name="DurCustomer" package-name="durion.crm" table-name="DUR_CUSTOMER">
        <description>Customer master data with contact and account information</description>
        <field name="customerId" type="id" is-pk="true"/>
        <field name="customerName" type="text-medium" is-pk="false"/>
        <field name="customerType" type="text-short">
            <description>INDIVIDUAL, BUSINESS, FLEET</description>
        </field>
        <field name="statusId" type="text-short" default="CUSTOMER_ACTIVE"/>
        <field name="businessType" type="text-short">
            <description>Type of business - RETAIL, WHOLESALE, WHOLESALE_RETAIL</description>
        </field>
        <field name="industryType" type="text-short">
            <description>Industry classification for business customers</description>
        </field>
        <field name="taxId" type="text-short">
            <description>Tax ID or EIN for business customers</description>
        </field>
        <field name="createdDate" type="date-time" default="ec.user.nowTimestamp"/>
        <field name="updatedDate" type="date-time" update="ec.user.nowTimestamp"/>
        <field name="notes" type="text-long"/>
        <relationship type="one" related-entity-name="Party" short-alias="party">
            <key-map field-name="customerId" related-field-name="partyId"/>
        </relationship>
    </entity>

    <entity entity-name="DurVehicle" package-name="durion.crm" table-name="DUR_VEHICLE">
        <description>Vehicle master data - individual vehicles and fleet vehicles</description>
        <field name="vehicleId" type="id" is-pk="true"/>
        <field name="customerId" type="id" is-pk="false">
            <description>Owner or primary operator</description>
        </field>
        <field name="fleetId" type="id" is-pk="false">
            <description>Fleet assignment if applicable</description>
        </field>
        <field name="vin" type="text-short">
            <description>Vehicle Identification Number</description>
        </field>
        <field name="year" type="number-integer"/>
        <field name="make" type="text-short"/>
        <field name="model" type="text-short"/>
        <field name="bodyType" type="text-short">
            <description>SEDAN, SUV, TRUCK, VAN, etc.</description>
        </field>
        <field name="color" type="text-short"/>
        <field name="licensePlate" type="text-short"/>
        <field name="mileage" type="number-decimal" default="0"/>
        <field name="registrationDate" type="date"/>
        <field name="nextServiceDate" type="date"/>
        <field name="statusId" type="text-short" default="VEHICLE_ACTIVE"/>
        <field name="notes" type="text-long"/>
        <field name="createdDate" type="date-time" default="ec.user.nowTimestamp"/>
        <field name="updatedDate" type="date-time" update="ec.user.nowTimestamp"/>
        <relationship type="one" related-entity-name="DurCustomer" short-alias="customer">
            <key-map field-name="customerId" related-field-name="customerId"/>
        </relationship>
        <relationship type="one" related-entity-name="DurFleet" short-alias="fleet">
            <key-map field-name="fleetId" related-field-name="fleetId"/>
        </relationship>
    </entity>

    <entity entity-name="DurFleet" package-name="durion.crm" table-name="DUR_FLEET">
        <description>Fleet master data for fleet customers</description>
        <field name="fleetId" type="id" is-pk="true"/>
        <field name="customerId" type="id" is-pk="false">
            <description>Fleet owner/operator customer</description>
        </field>
        <field name="fleetName" type="text-medium" is-pk="false"/>
        <field name="fleetType" type="text-short">
            <description>COMMERCIAL, GOVERNMENT, RENTAL, PERSONAL</description>
        </field>
        <field name="fleetSize" type="number-integer" default="0">
            <description>Number of vehicles in fleet</description>
        </field>
        <field name="operatingRegion" type="text-medium">
            <description>Geographic region of operations</description>
        </field>
        <field name="maintenanceSchedule" type="text-short">
            <description>MONTHLY, QUARTERLY, SEMI_ANNUAL, ANNUAL</description>
        </field>
        <field name="statusId" type="text-short" default="FLEET_ACTIVE"/>
        <field name="notes" type="text-long"/>
        <field name="createdDate" type="date-time" default="ec.user.nowTimestamp"/>
        <field name="updatedDate" type="date-time" update="ec.user.nowTimestamp"/>
        <relationship type="one" related-entity-name="DurCustomer" short-alias="customer">
            <key-map field-name="customerId" related-field-name="customerId"/>
        </relationship>
    </entity>

    <entity entity-name="DurContactMech" package-name="durion.crm" table-name="DUR_CONTACT_MECH">
        <description>Contact mechanisms for customers - email, phone, address, etc.</description>
        <field name="contactMechId" type="id" is-pk="true"/>
        <field name="customerId" type="id" is-pk="false"/>
        <field name="contactMechType" type="text-short">
            <description>EMAIL_ADDRESS, TELECOM_NUMBER, POSTAL_ADDRESS</description>
        </field>
        <field name="infoString" type="text-medium">
            <description>Email address, phone number, or formatted address</description>
        </field>
        <field name="isPrimary" type="text-indicator" default="N"/>
        <field name="isPreferred" type="text-indicator" default="N"/>
        <field name="purposeEnumId" type="text-short">
            <description>SHIP, BILL, HOME, WORK, etc.</description>
        </field>
        <field name="status" type="text-short" default="CONTACT_VALID"/>
        <field name="verified" type="text-indicator" default="N"/>
        <field name="verifiedDate" type="date-time"/>
        <field name="createdDate" type="date-time" default="ec.user.nowTimestamp"/>
        <field name="updatedDate" type="date-time" update="ec.user.nowTimestamp"/>
        <relationship type="one" related-entity-name="DurCustomer" short-alias="customer">
            <key-map field-name="customerId" related-field-name="customerId"/>
        </relationship>
    </entity>

</entities>
